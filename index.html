<!DOCTYPE HTML>
<html>
	<head>
		<title>HTML 5 rocks !</title>
		<link href="style/style.css" rel="stylesheet" type="text/css" />
		<link href="style/animations.css" rel="stylesheet" type="text/css" />
		<link href="style/jquery.tzineClock.css" rel="stylesheet" type="text/css" />
		<link href="style/counter.css" rel="stylesheet" type="text/css" />
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="google" value="notranslate">
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
		<!--<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>-->
		<script src="scripts/jquery-1.9.1.min.js"></script>
		<script src="scripts/jquery.tzineClock.js"></script>
		<script src="scripts/counter.js"></script>
		<!--<script src="http://cdn.peerjs.com/0/peer.min.js"></script>-->
		<script src="scripts/peer.js"></script>
		<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCRgU9Ra4x03nivyAWZTMsducxHbwLyunk&sensor=false"></script>
		<script>
			var local = false; // activation clay.io
			var localPeer = true; // peerjs online / offline

			// gestion de clay.io
			if (!local)
			{
				var Clay = {};
				Clay.gameKey = "html5meetup";
				Clay.ready = function( fn ) {
				    Clay.readyFunction = fn;
				};
				( function() {
				    var clay = document.createElement("script");
				    clay.src = ( "https:" == document.location.protocol ? "https://" : "http://" ) + "clay.io/api/api.js";
				    var tag = document.getElementsByTagName("script")[0];
				    tag.parentNode.insertBefore(clay, tag);
				} )();
			}

			function loadGame()
			{
				$('#gameArea').load("loading.html");

				var requirejs = document.createElement("script");
				requirejs.src = "scripts/require.js";
				requirejs.setAttribute("data-main", "scripts/main");
				document.head.appendChild(requirejs);
			}

			$(document).ready(function()
			{
				if (local)
				{
					loadGame();
				}
				else
				{
					Clay.ready(function(){
						window.leaderboard = new Clay.Leaderboard( { id: 1260, showPersonal: true, cumulative: true } );
						
						//window.leaderboard.post( { score: 3, name: "Florian Reneau@1#48.853357;2.409761", hideUI: false }, function(response) {
						//	console.log(response);
						//});

						//window.leaderboard.show();
						
						loadGame();
					});
				}
			});
		</script>
	</head>
    <body>
    	<div id="gameArea"></div>
    	<script>
    		var audio = document.createElement('audio');
    	</script>
    </body>
</html>